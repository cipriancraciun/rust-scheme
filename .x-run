#!/bin/bash

set -e -E -u -o pipefail -o noclobber -o noglob +o braceexpand || exit -- 1
trap 'printf -- "[ee] failed: %s\n" "${BASH_COMMAND}" >&2' ERR || exit -- 1
test "${#}" -eq 0
export -- LC_ALL=C




cat <<'EOS-31f6e6b1'




:: git :: exec -- git-w




:: compile / all / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" "${@}"
:: compile / all / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" "${@}"

:: compile / lib / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --lib --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" "${@}"
:: compile / lib / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --lib --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" "${@}"

:: compile / bin / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --bin vonuvoli-scheme --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" "${@}"
:: compile / bin / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --bin vonuvoli-scheme --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" "${@}"

:: compile / test / all / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --no-run "${@}"
:: compile / test / all / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --no-run "${@}"

:: compile / documentation / rust / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo doc --quiet --no-deps --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" "${@}"
:: compile / documentation / rust / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo doc --quiet --no-deps --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" "${@}"

:: compile / clippy / debug :: export -- CARGO_TARGET_DIR="${CARGO_TARGET_DIR:-./target/clippy}" ; "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" LD_LIBRARY_PATH="$( readlink -e -- "$( dirname -- "$( PATH="${RUST_PATH:-}" type -P -- rustc )" )/../lib" )" cargo clippy --quiet --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests} vonuvoli_lints_clippy" --lib "${@}"
:: compile / clippy / release :: export -- CARGO_TARGET_DIR="${CARGO_TARGET_DIR:-./target/clippy}" ; "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" LD_LIBRARY_PATH="$( readlink -e -- "$( dirname -- "$( PATH="${RUST_PATH:-}" type -P -- rustc )" )/../lib" )" cargo clippy --quiet --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release} vonuvoli_lints_clippy" --lib "${@}"




:: compile / tree / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo tree --quiet --all --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" "${@}"
:: compile / tree / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo tree --quiet --all --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" "${@}"

:: compile / license :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo license "${@}"




:: compile / documentation / r7rs / index :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / reports / release' r7rs definitions "${@}" >| ./target/documentation/r7rs-index.md
:: compile / documentation / libraries / index :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / reports / release' libraries definitions "${@}" >| ./target/documentation/libraries-index.md

:: compile / documentation / libraries / manual / markdown / single :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / documentation / release' dump-cmark -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" >| ./target/documentation/libraries.md
:: compile / documentation / libraries / manual / markdown / cpio :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / documentation / release' dump-cmark-cpio -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" >| ./target/documentation/libraries-md.cpio
:: compile / documentation / libraries / manual / html / single :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / documentation / release' dump-html -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" >| ./target/documentation/libraries.html
:: compile / documentation / libraries / manual / html / cpio :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / documentation / release' dump-html-cpio -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" >| ./target/documentation/libraries-html.cpio
:: compile / documentation / libraries / manual / json :: mkdir -p -- ./target/documentation ; exec -- "${X_RUN[@]}" ':: execute / bin / documentation / release' dump-json -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" >| ./target/documentation/libraries.json
<< compile / documentation / libraries / manual / markdown / tree
	rm -R -f -- ./target/documentation/libraries-md ./target/documentation/libraries-md.tmp
	mkdir -p -- ./target/documentation/libraries-md.tmp
	"${X_RUN[@]}" \
		':: execute / bin / documentation / release' dump-cmark-cpio -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" \
		| ( cd -- ./target/documentation/libraries-md.tmp && exec -- cpio -i --quiet )
	mv -T -- ./target/documentation/libraries-md.tmp ./target/documentation/libraries-md
!!
<< compile / documentation / libraries / manual / markdown / tree / snapshot
	rm -R -f -- ./documentation/libraries
	cp -T -R -- ./target/documentation/libraries-md ./documentation/libraries
!!
<< compile / documentation / libraries / manual / html / tree
	rm -R -f -- ./target/documentation/libraries-html ./target/documentation/libraries-html.tmp
	mkdir -p -- ./target/documentation/libraries-html.tmp
	"${X_RUN[@]}" \
		':: execute / bin / documentation / release' dump-html-cpio -- ./documentation/libraries-r7rs.ss ./documentation/libraries-vs.ss "${@}" \
		| ( cd -- ./target/documentation/libraries-html.tmp && exec -- cpio -i --quiet )
	mv -T -- ./target/documentation/libraries-html.tmp ./target/documentation/libraries-html
!!
<< compile / documentation / libraries / manual / all
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / markdown / single' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / markdown / cpio' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / markdown / tree' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / html / single' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / html / cpio' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / html / tree' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / json' "${@}"
!!
<< compile / documentation / libraries / all
	"${X_RUN[@]}" ':: compile / documentation / r7rs / index' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / index' "${@}"
	"${X_RUN[@]}" ':: compile / documentation / libraries / manual / all' "${@}"
!!




:: crate / package :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo package "${@}"
:: crate / publish :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo publish "${@}"




<< clean / target
	exec -- find ./target/ -mindepth 1 -xdev -depth -print -delete
!!
<< clean / target / perhaps
	test "${#}" -eq 0
	if test "$( du -m -c -d 0 -- ./target/ | tail -n 1 | cut -f 1 )" -gt 4096 ; then
		printf -- '[ww]  cleaning target!\n' >&2
		find ./target/ -mindepth 1 -xdev -depth -delete
	fi
!!
<< clean / all
	exec -- find ./target/ ./.rust/ ./.python/ -mindepth 1 -xdev -depth -print -delete
!!




<< execute / features / all
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <(
		(
			"${X_RUN[@]}" ':: environment / features / list / targets'
			"${X_RUN[@]}" ':: environment / features / list / individual'
			"${X_RUN[@]}" ':: environment / features / list / except-one'
		) | sort -R
	)
	_outcome=0
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/features--${_identifier}"
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 0 -- "${_target}.lock" "${@}" ; then
			printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
			rm -- "${_target}.lock"
			_outcome=1 ; printf -- '[--]\n\n\n' >&2 ; exit -- 1
		else
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
	exit -- "${_outcome}"
!!

<< compile / lib / debug / features / all
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / all' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!

<< compile / lib / debug / features / all / ordered
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	_outcome=0
	if ! "${X_RUN[@]}" ':: compile / lib / debug / features / targets' "${@}" ; then _outcome=1 ; exit -- 1 ; fi
	if ! "${X_RUN[@]}" ':: compile / lib / debug / features / individual' "${@}" ; then _outcome=1 ; exit -- 1 ; fi
	if ! "${X_RUN[@]}" ':: compile / lib / debug / features / except-one' "${@}" ; then _outcome=1 ; exit -- 1 ; fi
	exit -- "${_outcome}"
!!




<< execute / features / individual
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( "${X_RUN[@]}" ':: environment / features / list / individual' | sort -R )
	_outcome=0
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/features--${_identifier}"
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 0 -- "${_target}.lock" "${@}" ; then
			printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
			rm -- "${_target}.lock"
			_outcome=1 ; printf -- '[--]\n\n\n' >&2 ; exit -- 1
		else
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
	exit -- "${_outcome}"
!!

<< compile / lib / debug / features / individual
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / individual' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!


<< execute / features / except-one
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( "${X_RUN[@]}" ':: environment / features / list / except-one' | sort -R )
	_outcome=0
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/features--${_identifier}"
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 0 -- "${_target}.lock" "${@}" ; then
			printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
			rm -- "${_target}.lock"
			_outcome=1 ; printf -- '[--]\n\n\n' >&2 ; exit -- 1
		else
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
	exit -- "${_outcome}"
!!

<< compile / lib / debug / features / except-one
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / except-one' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!


<< execute / features / except-two
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( "${X_RUN[@]}" ':: environment / features / list / except-two' | sort -R )
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/random--${_identifier}"
		if test -f "${_target}.done" ; then
			continue
		fi
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 128 -- "${_target}.lock" "${@}" ; then
			if test "${?}" -ne 128 ; then
				rm -R -f -- "${_target}"
				printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
				rm -- "${_target}.lock"
				exit -- 1
			fi
		else
			touch -- "${_target}.done"
			rm -R -f -- "${_target}"
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
!!

<< compile / lib / debug / features / except-two
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / except-two' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!


<< execute / features / only-two
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( "${X_RUN[@]}" ':: environment / features / list / only-two' | sort -R )
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/random--${_identifier}"
		if test -f "${_target}.done" ; then
			continue
		fi
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 128 -- "${_target}.lock" "${@}" ; then
			if test "${?}" -ne 128 ; then
				rm -R -f -- "${_target}"
				printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
				rm -- "${_target}.lock"
				exit -- 1
			fi
		else
			touch -- "${_target}.done"
			rm -R -f -- "${_target}"
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
!!

<< compile / lib / debug / features / only-two
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / only-two' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!


<< execute / features / only-three
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( "${X_RUN[@]}" ':: environment / features / list / only-three' | sort -R )
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/random--${_identifier}"
		if test -f "${_target}.done" ; then
			continue
		fi
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 128 -- "${_target}.lock" "${@}" ; then
			if test "${?}" -ne 128 ; then
				rm -R -f -- "${_target}"
				printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
				rm -- "${_target}.lock"
				exit -- 1
			fi
		else
			touch -- "${_target}.done"
			rm -R -f -- "${_target}"
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
!!

<< compile / lib / debug / features / only-three
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / only-three' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!


<< execute / features / targets
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( exec -- "${X_RUN[@]}" ':: environment / features / list / targets' )
	_outcome=0
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/targets--${_identifier}"
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 0 -- "${_target}.lock" "${@}" ; then
			printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
			rm -- "${_target}.lock"
			_outcome=1 ; printf -- '[--]\n\n\n' >&2 ; exit -- 1
		else
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
	exit -- "${_outcome}"
!!

<< compile / tree / debug / features / targets
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / targets' "${X_RUN[@]}" ':: compile / tree / debug' "${@}"
!!

<< compile / all / debug / features / targets
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / targets' "${X_RUN[@]}" ':: compile / all / debug' "${@}"
!!

<< compile / lib / debug / features / targets
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / targets' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!

<< compile / test / all / debug / features / targets
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / targets' "${X_RUN[@]}" ':: compile / test / all / debug' "${@}"
!!

<< compile / test / scheme / debug / features / targets
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / targets' "${X_RUN[@]}" ':: compile / test / scheme / debug' "${@}"
!!


<< execute / features / combinations
	test "${#}" -ge 1
	readarray -t -- VONUVOLI_SCHEME_FEATURES < <( "${X_RUN[@]}" ':: environment / features / list / combinations' | sort -R )
	for VONUVOLI_SCHEME_FEATURES in "${VONUVOLI_SCHEME_FEATURES[@]}" ; do
		_identifier="$( printf -- '%s' "${VONUVOLI_SCHEME_FEATURES}" | md5sum -b )" ; _identifier="${_identifier%% *}"
		_target="$( exec -- readlink -e -- ./target )/random--${_identifier}"
		if test -f "${_target}.done" ; then
			continue
		fi
		if test -e "${_target}.lock" ; then
			continue
		fi
		printf -- '[ii]  using features `%s`...\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
		if test ! -d "${_target}" ; then
			mkdir -- "${_target}"
		fi
		if ! VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES}" CARGO_TARGET_DIR="${_target}" flock -x -n -E 128 -- "${_target}.lock" "${@}" ; then
			if test "${?}" -ne 128 ; then
				rm -R -f -- "${_target}"
				printf -- '[ee]  failed using features `%s`!\n' "${VONUVOLI_SCHEME_FEATURES}" >&2
				rm -- "${_target}.lock"
				exit -- 1
			fi
		else
			touch -- "${_target}.done"
			rm -R -f -- "${_target}"
			printf -- '[--]\n' >&2
			rm -- "${_target}.lock"
		fi
	done
!!

<< compile / lib / debug / features / combinations
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- VONUVOLI_COMPILE_LIB_DEPENDENCIES=false
	exec -- "${X_RUN[@]}" ':: execute / features / combinations' "${X_RUN[@]}" ':: compile / lib / debug' "${@}"
!!




<< compile / lib / dependencies
	if test "${VONUVOLI_COMPILE_LIB_DEPENDENCIES:-true}" == true ; then
		flock -x -- ./target/x-run--compile-lib-dependencies.lock "${X_RUN[@]}" ':: compile / lib / peg'
		flock -x -- ./target/x-run--compile-lib-dependencies.lock "${X_RUN[@]}" ':: compile / lib / sources-include'
	fi
!!


<< compile / lib / peg
	test "${#}" -eq 0
	export -- PATH="${RUST_PATH:-${PATH}}"
	if test ! -e ./sources/parser_peg.rs -o ./sources/parser_peg.peg -nt ./sources/parser_peg.rs ; then
		if test -e ./sources/parser_peg.rs ; then
			rm -- ./sources/parser_peg.rs
		fi
		rust-peg < ./sources/parser_peg.peg >| ./sources/.parser_peg.rs.tmp1
		rustfmt --config-path ./.rustfmt.toml < ./sources/.parser_peg.rs.tmp1 >| ./sources/.parser_peg.rs.tmp2
		mv -T -- ./sources/.parser_peg.rs.tmp2 ./sources/parser_peg.rs
		rm -- ./sources/.parser_peg.rs.tmp1
	fi
!!


<< compile / lib / sources-include
	test "${#}" -eq 0
	if test -e ./target/lib_sources.in ; then
		_timestamp_previous="$( exec -- date --reference ./target/lib_sources.in -- '+%s' )"
	else
		_timestamp_previous=0
	fi
	_timestamp_current="$( find ./sources/ -xdev -type f -not -name '.*' -not -name 'lib_sources.in' \( -name '*.rs' -o -name '*.in' \) -printf '%T@\n' | LC_ALL=C sort | tail -n 1 )"
	_timestamp_current="${_timestamp_current%%.*}"
	if test "${_timestamp_previous}" -lt "${_timestamp_current}" ; then
		if test -e ./target/lib_sources.in ; then
			rm -- ./target/lib_sources.in
		fi
		if test ! -e ./target/lib_sources.files ; then
			mkdir -- ./target/lib_sources.files
		fi
		(
			printf -- '%s\n' 'static SOURCES : &[((&str, usize), &str)] = &['
			find ./sources/ -xdev -type f -not -name '.*' -not -name 'lib_sources.in' \( -name '*.rs' -o -name '*.in' \) -printf '%f\n' \
			| LC_ALL=C sort \
			| while read _file ; do
				if test ! -e "./target/lib_sources.files/${_file}" -o "./sources/${_file}" -nt "./target/lib_sources.files/${_file}" ; then
					(
						printf -- '\n\n'
						readarray -t _file_lines < <( exec -- jq -R '.' < "./sources/${_file}" )
						_lines_count="${#_file_lines[@]}"
						for (( _line_index = 0 ; _line_index < _lines_count ; _line_index += 1 )) ; do
							printf '(("%s", %d), %s),\n' "${_file}" "$(( _line_index + 1 ))" "${_file_lines[$_line_index]}"
						done
						printf -- '\n\n'
					) > "./target/lib_sources.files/${_file}.tmp"
					mv -T -- "./target/lib_sources.files/${_file}.tmp" "./target/lib_sources.files/${_file}"
				fi
				cat -- "./target/lib_sources.files/${_file}"
			done
			printf -- '];\n'
		) \
		>| ./target/lib_sources.in.tmp
		touch -d "@${_timestamp_current}" -- ./target/lib_sources.in.tmp
		mv -T -- ./target/lib_sources.in.tmp ./target/lib_sources.in
	fi
!!


<< compile / lib / sources-ctags
	test "${#}" -eq 0
	if test -e ./target/lib_ctags.in ; then
		_timestamp_previous="$( exec -- date --reference ./target/lib_ctags.in -- '+%s' )"
	else
		_timestamp_previous=0
	fi
	_timestamp_current="$( find ./sources/ -xdev -type f -not -name '.*' -not -name 'lib_ctags.in' \( -name '*.rs' -o -name '*.in' \) -printf '%T@\n' | LC_ALL=C sort | tail -n 1 )"
	_timestamp_current="${_timestamp_current%%.*}"
	if test "${_timestamp_previous}" -lt "${_timestamp_current}" ; then
		if test -e ./target/lib_ctags.in ; then
			rm -- ./target/lib_ctags.in
		fi
		if test ! -e ./target/lib_ctags.files ; then
			mkdir -- ./target/lib_ctags.files
		fi
		(
			find ./sources/ -xdev -type f -not -name '.*' -not -name 'lib_ctags.in' \( -name '*.rs' -o -name '*.in' \) -printf '%f\n' \
			| LC_ALL=C sort \
			| while read _file ; do
				if test ! -e "./target/lib_ctags.files/${_file}" -o "./sources/${_file}" -nt "./target/lib_ctags.files/${_file}" ; then
					ctags --language-force=rust --format=1 -f "./target/lib_ctags.files/${_file}.tmp" "./sources/${_file}"
					mv -T -- "./target/lib_ctags.files/${_file}.tmp" "./target/lib_ctags.files/${_file}"
				fi
				cat -- "./target/lib_ctags.files/${_file}"
			done
		) \
		| sed -r \
				-e '/^!/d' \
				-e '/^__/d' \
				-e 's#^([^\t]*)\t.*#\1#' \
		| sort -u \
		>| ./target/lib_ctags.in.tmp
		touch -d "@${_timestamp_current}" -- ./target/lib_ctags.in.tmp
		mv -T -- ./target/lib_ctags.in.tmp ./target/lib_ctags.in
	fi
!!


<< compile / lib / source
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- PATH="${RUST_PATH:-${PATH}}"
	rustc \
			-Z unstable-options \
			--pretty=expanded \
			-- ./sources/lib.rs \
	| "${X_RUN[@]}" ':: execute / rust-fmt'
!!


<< compile / lib / ctags
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- PATH="${RUST_PATH:-${PATH}}"
	exec -- rusty-tags --omit-deps -- vi
!!


<< compile / test / scheme / source
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: compile / lib / dependencies'
	export -- PATH="${RUST_PATH:-${PATH}}"
	rustc \
			--test \
			--extern vonuvoli_scheme=./target/default/debug/libvonuvoli_scheme.rlib \
			-Z unstable-options \
			--pretty=expanded \
			-- ./tests/scheme.rs \
	| "${X_RUN[@]}" ':: execute / rust-fmt'
!!




<< environment / features / list / targets
	test "${#}" -eq 0
	exec -- sed -r -e 's/^\t+\|\t//' -e '/^\t*$/d' -e '/^\t*#/d' <<<'
	|	vonuvoli_debug_level_0
	|	vonuvoli_debug_level_1
	|	vonuvoli_debug_level_2
	|	vonuvoli_debug_level_3
	|	vonuvoli_debug_level_4
	|	vonuvoli_debug_level_5
	|	vonuvoli_debug_level_6
	|	vonuvoli_debug_for_tests
	|	vonuvoli_debug_for_binaries
	|	vonuvoli_release
	'
!!

<< environment / features / list / individual
	test "${#}" -eq 0
	exec -- sed -r -e 's/^\t+\|\t//' -e '/^\t*$/d' -e '/^\t*#.*$/d' -e '/^\t*.*#$/d' <<<'
	|	vonuvoli_abort_on_panic #
	|	vonuvoli_backtrace
	|	vonuvoli_backtrace_sources #
	|	vonuvoli_builtins_cache
	|	vonuvoli_builtins_comparisons
	|	vonuvoli_builtins_crypto
	|	vonuvoli_builtins_encoding
	|	vonuvoli_builtins_filesystem
	|	vonuvoli_builtins_filesystem_temporary
	|	vonuvoli_builtins_hashes
	|	vonuvoli_builtins_hashes_blake2
	|	vonuvoli_builtins_hashes_seahash
	|	vonuvoli_builtins_hashes_siphash
	|	vonuvoli_builtins_parameters
	|	vonuvoli_builtins_ports
	|	vonuvoli_builtins_ports_descriptors
	|	vonuvoli_builtins_ports_input_value
	|	vonuvoli_builtins_ports_output_value
	|	vonuvoli_builtins_ports_temporary
	|	vonuvoli_builtins_processes
	|	vonuvoli_builtins_promises
	|	vonuvoli_builtins_random
	|	vonuvoli_builtins_records
	|	vonuvoli_builtins_regex
	|	vonuvoli_builtins_serde
	|	vonuvoli_builtins_transcript
	|	vonuvoli_compiler
	|	vonuvoli_compiler_trace_enabled #
	|	vonuvoli_compiler_trace_error #
	|	vonuvoli_documentation
	|	vonuvoli_documentation_variances #
	|	vonuvoli_documentation_sources #
	|	vonuvoli_eqord
	|	vonuvoli_evaluator
	|	vonuvoli_evaluator_trace_enabled #
	|	vonuvoli_evaluator_trace_error #
	|	vonuvoli_expressions
	|	vonuvoli_expressions_optimizer
	|	vonuvoli_fmt_debug
	|	vonuvoli_fmt_display
	|	vonuvoli_hash
	|	vonuvoli_inline #
	|	vonuvoli_lints_issue_tracking #
	|	vonuvoli_lints_warnings #
	|	vonuvoli_new_immutable #
	|	vonuvoli_optimizer
	|	vonuvoli_optimizer_trace_enabled #
	|	vonuvoli_optimizer_trace_error #
	|	vonuvoli_panic_on_failed #
	|	vonuvoli_parser
	|	vonuvoli_parser_trace_enabled #
	|	vonuvoli_parser_trace_error #
	|	vonuvoli_port_output_display_flush #
	|	vonuvoli_port_output_newline_flush #
	|	vonuvoli_port_output_write_flush #
	|	vonuvoli_terminal
	|	vonuvoli_tests
	|	vonuvoli_tools_all
	|	vonuvoli_tools_bencher #
	|	vonuvoli_tools_common
	|	vonuvoli_tools_compiler #
	|	vonuvoli_tools_documentation #
	|	vonuvoli_tools_interpreter #
	|	vonuvoli_tools_reports #
	|	vonuvoli_tools_tester #
	|	vonuvoli_trace_enabled_all
	|	vonuvoli_trace_error_all #
	|	vonuvoli_transcript
	|	vonuvoli_transcript_ansi_always #
	|	vonuvoli_transcript_ansi_enabled
	|	vonuvoli_transcript_code_hashes
	|	vonuvoli_transcript_compact #
	|	vonuvoli_values_array
	|	vonuvoli_values_bytes
	|	vonuvoli_values_contexts
	|	vonuvoli_values_error
	|	vonuvoli_values_extended
	|	vonuvoli_values_keyword
	|	vonuvoli_values_lambda
	|	vonuvoli_values_mutable
	|	vonuvoli_values_native
	|	vonuvoli_values_opaque
	|	vonuvoli_values_pair_drop_iterative #
	|	vonuvoli_values_string
	|	vonuvoli_values_unique
	|	vonuvoli_values_values
'
!!

<< environment / features / list / except-one
	test "${#}" -eq 0
	exec -- python2 -- \
		<(
			exec -- sed -r -e 's/^\t+\|\t//' <<<'
			|	import itertools, sys
			|	with open (sys.argv[1]) as _stream :
			|		_options = [_option.strip () for _option in _stream]
			|	_options_count_min = len (_options) - 1
			|	_options_count_max = _options_count_min
			|	for _count in xrange (_options_count_min, _options_count_max + 1) :
			|		for _variants in itertools.combinations (_options, _count) :
			|			print " ".join (_variants)
			' \
		) \
		<( \
			exec -- "${X_RUN[@]}" ':: environment / features / list / individual' \
		)
!!

<< environment / features / list / except-two
	test "${#}" -eq 0
	exec -- python2 -- \
		<(
			exec -- sed -r -e 's/^\t+\|\t//' <<<'
			|	import itertools, sys
			|	with open (sys.argv[1]) as _stream :
			|		_options = [_option.strip () for _option in _stream]
			|	_options_count_min = len (_options) - 2
			|	_options_count_max = _options_count_min
			|	for _count in xrange (_options_count_min, _options_count_max + 1) :
			|		for _variants in itertools.combinations (_options, _count) :
			|			print " ".join (_variants)
			' \
		) \
		<( \
			exec -- "${X_RUN[@]}" ':: environment / features / list / individual' \
		)
!!

<< environment / features / list / only-two
	test "${#}" -eq 0
	exec -- python2 -- \
		<(
			exec -- sed -r -e 's/^\t+\|\t//' <<<'
			|	import itertools, sys
			|	with open (sys.argv[1]) as _stream :
			|		_options = [_option.strip () for _option in _stream]
			|	_options_count_min = 2
			|	_options_count_max = 2
			|	for _count in xrange (_options_count_min, _options_count_max + 1) :
			|		for _variants in itertools.combinations (_options, _count) :
			|			print " ".join (_variants)
			' \
		) \
		<( \
			exec -- "${X_RUN[@]}" ':: environment / features / list / individual' \
		)
!!

<< environment / features / list / only-three
	test "${#}" -eq 0
	exec -- python2 -- \
		<(
			exec -- sed -r -e 's/^\t+\|\t//' <<<'
			|	import itertools, sys
			|	with open (sys.argv[1]) as _stream :
			|		_options = [_option.strip () for _option in _stream]
			|	_options_count_min = 3
			|	_options_count_max = 3
			|	for _count in xrange (_options_count_min, _options_count_max + 1) :
			|		for _variants in itertools.combinations (_options, _count) :
			|			print " ".join (_variants)
			' \
		) \
		<( \
			exec -- "${X_RUN[@]}" ':: environment / features / list / individual' \
		)
!!

<< environment / features / list / combinations
	test "${#}" -eq 0
	exec -- python2 -- \
		<(
			exec -- sed -r -e 's/^\t+\|\t//' <<<'
			|	import itertools, sys
			|	with open (sys.argv[1]) as _stream :
			|		_options = [_option.strip () for _option in _stream]
			|	_options_count_min = 1
			|	_options_count_max = 3 # len (_options)
			|	for _count in xrange (_options_count_min, _options_count_max + 1) :
			|		for _variants in itertools.combinations (_options, _count) :
			|			print " ".join (_variants)
			' \
		) \
		<( \
			exec -- "${X_RUN[@]}" ':: environment / features / list / individual' \
		)
!!


<< execute / rust-fmt
	export -- PATH="${RUST_PATH:-${PATH}}"
	rustfmt --config-path ./.rustfmt.toml -- "${@}" \
	| sed -r -n \
			-e ': b' \
			-e '/^$/ d' \
			-e '/^\#\[macro_use\]$/ d' \
			-e '/^\#\[macro_export\]$/ d' \
			-e '/^\#\[allow\(unused_macros\)\]$/ d' \
			-e '/^macro_rules!/ b d' \
			-e 'p' \
			-e 'b' \
			-e ': d' -e 'n' -e '/^ +/! b b' -e 'b d' \
	#
!!




:: execute / bin / debug :: if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then "${X_RUN[@]}" ':: compile / bin / debug' ; fi ; exec -- "${VONUVOLI_SCHEME_BINARY:-./target/default/debug/vonuvoli-scheme}" "${@}"
:: execute / bin / release :: if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then "${X_RUN[@]}" ':: compile / bin / release' ; fi ; exec -- "${VONUVOLI_SCHEME_BINARY:-./target/default/release/vonuvoli-scheme}" "${@}"

:: execute / bin / interpreter / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / debug' interpreter "${@}"
:: execute / bin / interpreter / release :: exec -- "${X_RUN[@]}" ':: execute / bin / release' interpreter "${@}"

:: execute / bin / compiler / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / debug' compiler "${@}"
:: execute / bin / compiler / release :: exec -- "${X_RUN[@]}" ':: execute / bin / release' compiler "${@}"

:: execute / bin / tester / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / debug' tester "${@}"
:: execute / bin / tester / release :: exec -- "${X_RUN[@]}" ':: execute / bin / release' tester "${@}"

:: execute / bin / bencher / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / debug' bencher "${@}"
:: execute / bin / bencher / release :: exec -- "${X_RUN[@]}" ':: execute / bin / release' bencher "${@}"

:: execute / bin / reports / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / debug' reports "${@}"
:: execute / bin / reports / release :: exec -- "${X_RUN[@]}" ':: execute / bin / release' reports "${@}"

:: execute / bin / documentation / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / debug' documentation "${@}"
:: execute / bin / documentation / release :: exec -- "${X_RUN[@]}" ':: execute / bin / release' documentation "${@}"

:: execute / test / all / debug :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 -- --test-threads 1 --test 'test__' "${@}"
:: execute / test / all / release :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --jobs 1 -- --test-threads 1 --test 'test__' "${@}"

:: execute / test / all / benchmark :: "${X_RUN[@]}" ':: compile / lib / dependencies' ; exec -- taskset -c 2 env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --jobs 1 -- --test-threads 1 --bench 'benchmark__' "${@}"
:: execute / test / all / coverage / kcov :: export -- CARGO_TARGET_DIR="${CARGO_TARGET_DIR:-./target/kcov}" ; "${X_RUN[@]}" ':: compile / test / all / debug' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo kcov --no-clean-rebuild --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 --output ./target/kcov/output -- "${@}"


:: execute / chibi :: exec -- chibi-scheme -m scheme.base -m scheme.case-lambda -m scheme.char -m scheme.complex -m scheme.cxr -m scheme.eval -m scheme.file -m scheme.inexact -m scheme.lazy -m scheme.load -m scheme.process-context -m scheme.r5rs -m scheme.read -m scheme.repl -m scheme.time -m scheme.write "${@}"
:: execute / gauche :: exec -- gosh -b -q -u scheme.base -u scheme.case-lambda -u scheme.char -u scheme.complex -u scheme.cxr -u scheme.eval -u scheme.file -u scheme.inexact -u scheme.lazy -u scheme.load -u scheme.process-context -u scheme.r5rs -u scheme.read -u scheme.repl -u scheme.time -u scheme.write "${@}"
:: execute / python :: exec -- python2 -E -O -O -B -u "${@}"




:: execute / bin / interpreter / debug / time :: if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then "${X_RUN[@]}" ':: compile / bin / debug' ; fi ; exec -- time -f '(( elapsed: %E (user: %U, kernel: %S), CPU: %P, memory: %M (faults: %F, swapped: %W), I/O: %I / %O (waits: %w) ))' -- "${VONUVOLI_SCHEME_BINARY:-./target/default/debug/vonuvoli-scheme}" interpreter "${@}"
:: execute / bin / interpreter / release / time :: if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then "${X_RUN[@]}" ':: compile / bin / release' ; fi ; exec -- time -f '(( elapsed: %E (user: %U, kernel: %S), CPU: %P, memory: %M (faults: %F, swapped: %W), I/O: %I / %O (waits: %w) ))' -- "${VONUVOLI_SCHEME_BINARY:-./target/default/release/vonuvoli-scheme}" interpreter "${@}"

:: execute / chibi / time :: exec -- time -f '(( elapsed: %E (user: %U, kernel: %S), CPU: %P, memory: %M (faults: %F, swapped: %W), I/O: %I / %O (waits: %w) ))' -- chibi-scheme -m scheme.base -m scheme.case-lambda -m scheme.char -m scheme.complex -m scheme.cxr -m scheme.eval -m scheme.file -m scheme.inexact -m scheme.lazy -m scheme.load -m scheme.process-context -m scheme.r5rs -m scheme.read -m scheme.repl -m scheme.time -m scheme.write "${@}"
:: execute / gauche / time :: exec -- time -f '(( elapsed: %E (user: %U, kernel: %S), CPU: %P, memory: %M (faults: %F, swapped: %W), I/O: %I / %O (waits: %w) ))' -- gosh -b -q -u scheme.base -u scheme.case-lambda -u scheme.char -u scheme.complex -u scheme.cxr -u scheme.eval -u scheme.file -u scheme.inexact -u scheme.lazy -u scheme.load -u scheme.process-context -u scheme.r5rs -u scheme.read -u scheme.repl -u scheme.time -u scheme.write "${@}"
:: execute / python / time :: exec -- time -f '(( elapsed: %E (user: %U, kernel: %S), CPU: %P, memory: %M (faults: %F, swapped: %W), I/O: %I / %O (waits: %w) ))' -- python2 -E -O -O -B -u "${@}"




:: execute / bin / interpreter / debug / x-selection / clipboard :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / debug' <( exec -- x-selection clipboard output )
:: execute / bin / interpreter / debug / x-selection / primary :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / debug' <( exec -- x-selection primary output )

:: execute / bin / compiler / debug / x-selection / clipboard :: exec -- less-exec "${X_RUN[@]}" ':: execute / bin / compiler / debug' <( exec -- x-selection clipboard output )
:: execute / bin / compiler / debug / x-selection / primary :: exec -- less-exec "${X_RUN[@]}" ':: execute / bin / compiler / debug' <( exec -- x-selection primary output )


:: execute / bin / interpreter / release / x-selection / clipboard :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / release' <( exec -- x-selection clipboard output )
:: execute / bin / interpreter / release / x-selection / primary :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / release' <( exec -- x-selection primary output )

:: execute / bin / compiler / release / x-selection / clipboard :: exec -- less-exec "${X_RUN[@]}" ':: execute / bin / compiler / release' <( exec -- x-selection clipboard output )
:: execute / bin / compiler / release / x-selection / primary :: exec -- less-exec "${X_RUN[@]}" ':: execute / bin / compiler / release' <( exec -- x-selection primary output )




:: compile / all / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / all / debug' --color always "${@}"
:: compile / lib / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / debug' --color always "${@}"
:: compile / bin / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / bin / debug' --color always "${@}"
:: compile / test / all / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / test / all / debug' "${@}"
:: compile / documentation / rust / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / rust / debug' --color always "${@}"
:: compile / clippy / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / clippy / debug' --color always "${@}"

:: compile / all / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / all / release' --color always "${@}"
:: compile / lib / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / release' --color always "${@}"
:: compile / bin / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / bin / release' --color always "${@}"
:: compile / test / all / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / test / all / release' "${@}"
:: compile / documentation / rust / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / rust / release' --color always "${@}"
:: compile / clippy / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / clippy / release' --color always "${@}"


:: compile / documentation / r7rs / index / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / r7rs / index' "${@}"
:: compile / documentation / libraries / index / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / index' "${@}"
:: compile / documentation / libraries / manual / markdown / single / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / markdown / single' "${@}"
:: compile / documentation / libraries / manual / markdown / cpio / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / markdown / cpio' "${@}"
:: compile / documentation / libraries / manual / markdown / tree / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / markdown / tree' "${@}"
:: compile / documentation / libraries / manual / html / single / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / html / single' "${@}"
:: compile / documentation / libraries / manual / html / cpio / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / html / cpio' "${@}"
:: compile / documentation / libraries / manual / html / tree / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / html / tree' "${@}"
:: compile / documentation / libraries / manual / json / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / json' "${@}"
:: compile / documentation / libraries / manual / all / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / manual / all' "${@}"
:: compile / documentation / libraries / all / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / documentation / libraries / all' "${@}"

:: compile / lib / dependencies / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / dependencies' "${@}"
:: compile / lib / peg / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / peg' "${@}"
:: compile / lib / source / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / source' "${@}"
:: compile / lib / sources-include / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / sources-isclude / peg' "${@}"
:: compile / lib / sources-ctags / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / sources-ctags / peg' "${@}"
:: compile / lib / ctags / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / lib / ctags' "${@}"


:: execute / bin / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / debug' "${@}"
:: execute / bin / interpreter / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / interpreter / debug' "${@}"
:: execute / bin / compiler / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / compiler / debug' "${@}"
:: execute / bin / tester / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / tester / debug' "${@}"
:: execute / bin / bencher / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / bencher / debug' "${@}"
:: execute / bin / reports / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / reports / debug' "${@}"
:: execute / bin / documentation / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / documentation / debug' "${@}"
:: execute / test / all / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / all / debug' "${@}"

:: execute / bin / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / release' "${@}"
:: execute / bin / interpreter / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / interpreter / release' "${@}"
:: execute / bin / compiler / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / compiler / release' "${@}"
:: execute / bin / tester / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / tester / release' "${@}"
:: execute / bin / bencher / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / bencher / release' "${@}"
:: execute / bin / reports / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / reports / release' "${@}"
:: execute / bin / documentation / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / documentation / release' "${@}"
:: execute / test / all / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / all / release' "${@}"




<< execute / watch
	test "${#}" -ge 1
	_identifier="$( printf -- '%s' "${*}" | md5sum -b )" ; _identifier="${_identifier%% *}"
	while true ; do
		printf '\n[--] ...\n\n' >&2
		if ! "${@}" 2>&1 < /dev/null | tee "./target/x-run--watch--${_identifier}.txt" ; then
			x-output osd-notify low "FAILED!  ${*}"
			less -- "./target/x-run--watch--${_identifier}.txt"
		else
			x-output osd-notify low "Succeeded:  ${*}"
			rm -- "./target/x-run--watch--${_identifier}.txt"
		fi
		printf '\n[--]\n' >&2
		"${X_RUN[@]}" ':: execute / watch / wait' "${*}"
	done
!!


<< execute / watch / wait
	test "${#}" -eq 1
	_sources=(
			./Cargo.toml ./Cargo.lock
			./sources/
			./tests/
			./examples/
			./documentation/libraries-r7rs.ss
			./documentation/libraries-vs.ss
			./documentation/libraries.css
			./documentation/libraries.js
		)
	if test -n "${VONUVOLI_SCHEME_BINARY:-}" ; then
		_sources+=( "${VONUVOLI_SCHEME_BINARY:-}" )
	fi
	_identifier="$( printf -- '%s' "${*}" | md5sum -b )" ; _identifier="${_identifier%% *}"
	if test -e "./target/x-run--watch--${_identifier}.wait" ; then
		_timestamp_previous="$( find ./target/x-run--watch--${_identifier}.wait -xdev -printf '%T+\n' | LC_ALL=C sort | tail -n 1 )"
		_timestamp_previous="$( exec -- date -d "${_timestamp_previous/+/T}" -- '+%Y%m%d%H%M.%S' )"
	else
		_timestamp_previous=0
	fi
	while sleep 0.5s ; do
		_timestamp_current="$( find "${_sources[@]}" -xdev -type f -not -path '*/_outputs/*' -printf '%T+\n' | LC_ALL=C sort | tail -n 1 )"
		_timestamp_current="$( exec -- date -d "${_timestamp_current/+/T}" -- '+%Y%m%d%H%M.%S' )"
		if test "${_timestamp_previous/./}" -lt "${_timestamp_current/./}" ; then
			break
		fi
	done
	touch -t "${_timestamp_current}" -- "./target/x-run--watch--${_identifier}.wait"
!!




:: browse / documentation / libraries / manual / html / single :: exec -- x-www open file://"$( readlink -e -- ./target/documentation/libraries.html )"
:: browse / documentation / libraries / manual / html / tree :: exec -- x-www open file://"$( readlink -e -- ./target/documentation/libraries-html/_libraries.html )"
:: browse / documentation / rust / debug :: exec -- x-www open file://"$( readlink -e -- ./target/build/debug/doc/vonuvoli_scheme/index.html )"
:: browse / documentation / rust / release :: exec -- x-www open file://"$( readlink -e -- ./target/build/release/doc/vonuvoli_scheme/index.html )"

:: browse / documentation / libraries / manual / html / single / web :: exec -- x-www open https://data.volution.ro/ciprian/c7be0c0ba57fbe06fc342c1fdd27adc1/documentation/libraries.html
:: browse / documentation / libraries / manual / html / tree / web :: exec -- x-www open https://data.volution.ro/ciprian/c7be0c0ba57fbe06fc342c1fdd27adc1/documentation/libraries-html/_libraries.html
:: browse / documentation / rust / debug / web :: exec -- x-www open https://data.volution.ro/ciprian/c7be0c0ba57fbe06fc342c1fdd27adc1/documentation/rust/debug/vonuvoli_scheme/index.html
:: browse / documentation / rust / release / web :: exec -- x-www open https://data.volution.ro/ciprian/c7be0c0ba57fbe06fc342c1fdd27adc1/documentation/rust/release/vonuvoli_scheme/index.html

:: browse / documentation / readme :: exec -- x-www open http://127.0.0.1:53110/
:: browse / documentation / readme / server :: exec -- ./.python/bin/restview -B -l 53110 -- ./readme.rst

:: browse / coverage / kcov :: exec -- x-www open file://"$( readlink -e -- ./target/kcov/output/index.html )"

:: browse / r7rs :: exec -- zathura -- ./documentation/external/r7rs-small-spec/stripped/r7rs.pdf




:: files / grep / sources / string :: exec -- git grep --no-index -C10 -F "${@/#/-e}" -- ./sources
:: files / grep / sources / regexp :: exec -- git grep --no-index -C10 -P "${@/#/-e}" -- ./sources

:: files / grep / sources / x-selection / primary :: exec -- git grep --no-index -C10 -F -e "$( exec -- x-selection primary output )" -- ./sources
:: files / grep / sources / x-selection / clipboard :: exec -- git grep --no-index -C10 -F -e "$( exec -- x-selection clipboard output )" -- ./sources

:: files / grep / sources / fixme / show :: exec -- git grep --no-index -C10 -P -e 'FIXME' -- ./sources
:: files / grep / sources / fixme / list :: exec -- git grep --no-index -l -P -e 'FIXME' -- ./sources

:: files / grep / sources / todo / show :: exec -- git grep --no-index -C10 -P -e 'TODO' -- ./sources
:: files / grep / sources / todo / list :: exec -- git grep --no-index -l -P -e 'TODO' -- ./sources

:: files / grep / sources / issue / show :: exec -- git grep --no-index -C10 -P -e '\( *github_issue *, *[0-9]+ *\)' -- ./sources
:: files / grep / sources / issue / list :: exec -- git grep --no-index -l -P -e '\( *github_issue *, *[0-9]+ *\)' -- ./sources

:: files / grep / sources / unimplemented / all / show :: exec -- git grep --no-index -C10 -P -e 'unimplemented!(?!.*// (deferred|OK|FIXME:.*)$)' -- ./sources
:: files / grep / sources / unimplemented / all / list :: exec -- git grep --no-index -l -P -e 'unimplemented!(?!.*// (deferred|OK|FIXME:.*)$)' -- ./sources
:: files / grep / sources / unimplemented / primitives / show :: exec -- git grep --no-index -C10 -P -e 'unimplemented!(?!.*// (deferred|OK|FIXME:.*)$)' -- './sources/primitives*.rs'
:: files / grep / sources / unimplemented / builtins / show :: exec -- git grep --no-index -C10 -P -e 'unimplemented!(?!.*// (deferred|OK|FIXME:.*)$)' -- './sources/builtins*.rs'

:: files / grep / sources / errors / duplicates / list :: grep -o -P -e '(?<=0x)[0-9a-f]{8}(?=[)])|(?<=")[0-9a-f]{8}(?=")' -h -r ./sources -r ./tests --include '*.rs' --include '*.in' | sort | uniq -d
:: files / grep / sources / errors / duplicates / show :: "${X_RUN[@]}" ':: files / grep / sources / errors / duplicates / list' | git grep --no-index -C0 -F -f /dev/stdin -- ./sources ./tests
:: files / grep / sources / errors / improper / list :: grep -o -P -e '(?<=0x)([0-9a-f]{3,7}|[0-9a-f]{9,})(?=[)])|(?<=")([0-9a-f]{3,7}|[0-9a-f]{9,})(?=")' -h -r ./sources -r ./tests --include '*.rs' --include '*.in' | sort -u
:: files / grep / sources / errors / improper / show :: "${X_RUN[@]}" ':: files / grep / sources / errors / improper / list' | git grep --no-index -C2 -F -f /dev/stdin -- ./sources ./tests

:: files / grep / sources / derives / show :: exec -- git grep --no-index -A3 -P -e '#\[.*derive.*\]' -- ./sources

:: files / grep / sources / features / list :: grep -o -P -e '(?<=feature = ")[^"]+(?=")' -h -r ./sources -r ./tests --include '*.rs' --include '*.in' | sort -u

:: files / grep / outputs / benchmarks :: git diff --color-words -U0 -- ./tests/_outputs/*--benchmark__* | grep -E -e '^....--' -e 'average' | sed -r -e 's/^(....)--- i\/tests\/_outputs\/[a-z0-9-]+--benchmark__/\1/'

:: files / sed / sources / inline-always / disable :: exec -- find ./sources ./tests -xdev -type f \( -name '*.rs' -o -name '*.in' \) -exec sed -r -e 's!^(\s*)(#\[ inline \(always\) \])$!\1#[ inline (never) ] // __inline_always__!' -i -- {} \;
:: files / sed / sources / inline-always / enable :: exec -- find ./sources ./tests -xdev -type f \( -name '*.rs' -o -name '*.in' \) -exec sed -r -e 's!^(\s*)(#\[ inline \(never\) \] // __inline_always__)$!\1#[ inline (always) ]!' -i -- {} \;
:: files / sed / sources / inline-always / configurable :: exec -- find ./sources ./tests -xdev -type f \( -name '*.rs' -o -name '*.in' \) -exec sed -r -e 's!^(\s*)(#\[ inline \(always\) \])$!\1#[ cfg_attr ( feature = "vonuvoli_inline", inline (always) ) ]!' -i -- {} \;
:: files / sed / sources / inline-always / to-plain :: exec -- find ./sources ./tests -xdev -type f \( -name '*.rs' -o -name '*.in' \) -exec sed -r -e 's!^(\s*)(#\[ inline \(always\) \])$!\1#[ inline ]!' -e 's!^(\s*)(#\[ cfg_attr \( feature = "vonuvoli_inline", inline \(always\) \) \])$!\1#[ cfg_attr ( feature = "vonuvoli_inline", inline ) ]!' -i -- {} \;

:: files / diff / outputs / libraries / markdown / single :: exec -- git diff --no-index -M -- ./.publish/documentation/libraries.md ./target/documentation/libraries.md
:: files / diff / outputs / libraries / markdown / tree :: exec -- git diff --no-index -M -- ./.publish/documentation/libraries-md/ ./target/documentation/libraries-md/
:: files / diff / outputs / libraries / html / single :: exec -- git diff --no-index -M -- ./.publish/documentation/libraries.html ./target/documentation/libraries.html
:: files / diff / outputs / libraries / html / tree :: exec -- git diff --no-index -M -- ./.publish/documentation/libraries-html/ ./target/documentation/libraries-html/
:: files / diff / outputs / libraries / json :: exec -- git diff --no-index -M -- ./.publish/documentation/libraries.json ./target/documentation/libraries.json




<< workbench / initialize
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: workbench / workspace / initialize'
	"${X_RUN[@]}" ':: workbench / rust-up / initialize'
	"${X_RUN[@]}" ':: workbench / rust-up / install'
	"${X_RUN[@]}" ':: workbench / cargo / install or upgrade'
	if false ; then
		"${X_RUN[@]}" ':: workbench / python / initialize'
		"${X_RUN[@]}" ':: workbench / python / install or upgrade'
	fi
!!

<< workbench / workspace / initialize
	test "${#}" -eq 0
	if test ! -e ./.cargo ; then
		mkdir -- ./.cargo
	fi
	if test ! -e ./.rust ; then
		mkdir -- ./.rust
	fi
	if test ! -e ./.python ; then
		mkdir -- ./.python
	fi
	if test ! -e ./target ; then
		mkdir -- ./target
	fi
	if test ! -e ./tests/_outputs ; then
		mkdir -- ./tests/_outputs
	fi
	if test ! -e ./examples/_outputs ; then
		mkdir -- ./examples/_outputs
	fi
!!

<< workbench / rust-up / initialize
	test "${#}" -eq 0
	test -e ./.rust
	if test ! -e ./.rust/.initialized ; then
		mkdir -- ./.rust/rustup
		mkdir -- ./.rust/cargo
		curl -s -o ./.rust/rustup-init.tmp -- https://static.rust-lang.org/rustup/dist/x86_64-unknown-linux-gnu/rustup-init
		chmod +x -- ./.rust/rustup-init.tmp
		mv -n -T -- ./.rust/rustup-init.tmp ./.rust/rustup-init
		export -- RUSTUP_HOME="$( exec -- readlink -e -- ./.rust/rustup )"
		export -- CARGO_HOME="$( exec -- readlink -e -- ./.rust/cargo )"
		nice -n 19 -- ./.rust/rustup-init -y --no-modify-path
		touch -- ./.rust/.initialized
	fi
!!

<< workbench / rust-up / install
	test "${#}" -eq 0
	test -e ./.rust/.initialized
	export -- RUSTUP_HOME="$( exec -- readlink -e -- ./.rust/rustup )"
	export -- CARGO_HOME="$( exec -- readlink -e -- ./.rust/cargo )"
	nice -n 19 -- ./.rust/cargo/bin/rustup toolchain install -- stable
	if true ; then
		nice -n 19 -- ./.rust/cargo/bin/rustup toolchain install -- nightly
	else
		nice -n 19 -- ./.rust/cargo/bin/rustup toolchain install -- nightly-2018-07-18
		test -e -- ./nightly-2018-07-17-x86_64-unknown-linux-gnu
		ln -s -T -f -- ./nightly-2018-07-17-x86_64-unknown-linux-gnu ./.rust/rustup/toolchains/nightly-x86_64-unknown-linux-gnu
	fi
	## nice -n 19 -- ./.rust/cargo/bin/rustup component add --toolchain stable -- rustfmt-preview
	nice -n 19 -- ./.rust/cargo/bin/rustup component add --toolchain nightly -- rustfmt-preview
	## nice -n 19 -- ./.rust/cargo/bin/rustup component add --toolchain stable -- clippy-preview
	nice -n 19 -- ./.rust/cargo/bin/rustup component add --toolchain nightly -- clippy-preview
!!

<< workbench / rust-up / upgrade
	test "${#}" -eq 0
	test -e ./.rust/.initialized
	export -- RUSTUP_HOME="$( exec -- readlink -e -- ./.rust/rustup )"
	export -- CARGO_HOME="$( exec -- readlink -e -- ./.rust/cargo )"
	nice -n 19 -- ./.rust/cargo/bin/rustup update
!!

<< workbench / cargo / install or upgrade
	test "${#}" -eq 0
	test -e ./.rust/.initialized
	export -- RUSTUP_HOME="$( exec -- readlink -e -- ./.rust/rustup )"
	export -- CARGO_HOME="$( exec -- readlink -e -- ./.rust/cargo )"
	export -- PATH="${RUST_PATH:-$( exec -- readlink -e -- ./.rust/rustup/toolchains/nightly-x86_64-unknown-linux-gnu/bin ):$( exec -- readlink -e -- ./.rust/cargo/bin ):${PATH}}"
	## nice -n 19 -- cargo install --force peg
	## nice -n 19 -- cargo install --force cargo-kcov
	## nice -n 19 -- cargo install --force cargo-license
	## nice -n 19 -- cargo install --force cargo-tree
	## nice -n 19 -- cargo install --force rusty-tags
!!

<< workbench / cargo / update
	test "${#}" -eq 0
	test -e ./.rust/.initialized
	export -- RUSTUP_HOME="$( exec -- readlink -e -- ./.rust/rustup )"
	export -- CARGO_HOME="$( exec -- readlink -e -- ./.rust/cargo )"
	export -- PATH="${RUST_PATH:-$( exec -- readlink -e -- ./.rust/rustup/toolchains/nightly-x86_64-unknown-linux-gnu/bin ):$( exec -- readlink -e -- ./.rust/cargo/bin ):${PATH}}"
	nice -n 19 -- cargo update
!!

<< workbench / python / initialize
	test "${#}" -eq 0
	if test ! -e ./.python/.initialized ; then
		test -e ./.python
		nice -n 19 -- virtualenv --python python2.7 -- ./.python
		touch -- ./.python/.initialized
	fi
!!

<< workbench / python / install or upgrade
	test "${#}" -eq 0
	test -e ./.python/.initialized
	nice -n 19 -- ./.python/bin/pip install --force docutils
	nice -n 19 -- ./.python/bin/pip install --force restview
!!




:: environment / rust-up / use / stable :: export -- RUST_PATH="$( exec -- readlink -e -- ./.rust/rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin ):$( exec -- readlink -e -- ./.rust/cargo/bin ):${PATH}"
:: environment / rust-up / use / nightly :: export -- RUST_PATH="$( exec -- readlink -e -- ./.rust/rustup/toolchains/nightly-x86_64-unknown-linux-gnu/bin ):$( exec -- readlink -e -- ./.rust/cargo/bin ):${PATH}"

:: environment / binary / debug / default :: export -- VONUVOLI_SCHEME_BINARY=./target/default/debug/vonuvoli-scheme
:: environment / binary / debug / build :: export -- VONUVOLI_SCHEME_BINARY=./target/build/debug/debug/vonuvoli-scheme

:: environment / binary / release / default :: export -- VONUVOLI_SCHEME_BINARY=./target/default/release/vonuvoli-scheme
:: environment / binary / release / build :: export -- VONUVOLI_SCHEME_BINARY=./target/build/release/release/vonuvoli-scheme

:: environment / rust / stack / 128M :: export -- RUST_MIN_STACK=134217728
:: environment / rust / stack / 1024M :: export -- RUST_MIN_STACK=1073741824
:: environment / rust / backtrace / enable :: export -- RUST_BACKTRACE=1
:: environment / rust / backtrace / disable :: export -- RUST_BACKTRACE=0

:: environment / tests / debug / enable :: export -- VONUVOLI_SCHEME_TESTS_DEBUG=true
:: environment / tests / debug / disable :: export -- VONUVOLI_SCHEME_TESTS_DEBUG=false

:: environment / features / all :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_features_all
:: environment / features / release :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_release
:: environment / features / debug / binaries :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_for_binaries
:: environment / features / debug / tests :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_for_tests
:: environment / features / debug / level-0 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_0
:: environment / features / debug / level-1 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_1
:: environment / features / debug / level-2 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_2
:: environment / features / debug / level-3 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_3
:: environment / features / debug / level-4 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_4
:: environment / features / debug / level-5 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_5
:: environment / features / debug / level-6 :: export -- VONUVOLI_SCHEME_FEATURES=vonuvoli_debug_level_6
:: environment / features / tools / interpreter :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_interpreter_binary'
:: environment / features / tools / compiler :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_compiler_binary'
:: environment / features / tools / tester :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_tester_binary'
:: environment / features / tools / bencher :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_bencher_binary'
:: environment / features / tools / reports :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_reports_binary'
:: environment / features / tools / documentation :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_documentation_binary'
:: environment / features / tools / documentation + reports :: export -- VONUVOLI_SCHEME_FEATURES='vonuvoli_tools_documentation_binary vonuvoli_tools_reports_binary'
:: environment / features / select / individual :: printf -- 'export -- VONUVOLI_SCHEME_FEATURES=%q' "$( exec -- x-input select < <( exec -- "${X_RUN[@]}" ':: environment / features / list / individual' ) )"
:: environment / features / select / only-two :: printf -- export -- VONUVOLI_SCHEME_FEATURES=%q' "$( exec -- x-input select < <( "${X_RUN[@]}" ':: environment / features / list / only-two' ) )"
:: environment / features / select / only-three :: printf -- export -- VONUVOLI_SCHEME_FEATURES=%q' "$( exec -- x-input select < <( "${X_RUN[@]}" ':: environment / features / list / only-three' ) )"

:: environment / features / x-selection / primary :: export -- VONUVOLI_SCHEME_FEATURES="$( exec -- x-selection primary output )"
:: environment / features / x-selection / clipboard :: export -- VONUVOLI_SCHEME_FEATURES="$( exec -- x-selection clipboard output )"

:: environment / x-run / trace / enable :: export -- X_RUN_TRACE=true
:: environment / x-run / trace / disable :: export -- X_RUN_TRACE=false
:: environment / x-run / targets / all :: export -- X_RUN_TARGETS=all
:: environment / x-run / targets / local :: export -- X_RUN_TARGETS=local
:: environment / x-run / targets / builder :: export -- X_RUN_TARGETS=builder

:: environment / taskset / all :: exec -- taskset -a -p -c 0-31 "${$}"
:: environment / taskset / 0,2 :: exec -- taskset -a -p -c 0,2 "${$}"
:: environment / taskset / 3 :: exec -- taskset -a -p -c 3 "${$}"




<< publish / binaries
	test "${#}" -eq 0
	if test -f ./.publish.rsync ; then
		_store="$( exec -- cat -- ./.publish.rsync )"
	elif test -d ./.publish ; then
		_store="$( exec -- readlink -e -- ./.publish )"
	fi
	test -n "${_store:?}"
	flock -x -- ./target/x-run--rsync--publish-binaries-debug.lock \
	rsync \
			--archive \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times \
			--compress-level 0 \
			--itemize-changes \
			--filter '+ /vonuvoli-scheme' \
			--filter '- /***' \
			-- \
		./target/build/debug/debug/ \
		"${_store}/build/debug/" \
	#
	flock -x -- ./target/x-run--rsync--publish-binaries-release.lock \
	rsync \
			--archive \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times \
			--compress-level 0 \
			--itemize-changes \
			--filter '+ /vonuvoli-scheme' \
			--filter '- /***' \
			-- \
		./target/build/release/release/ \
		"${_store}/build/release/" \
	#
!!


<< publish / documentation / rust
	test "${#}" -eq 0
	if test -f ./.publish.rsync ; then
		_store="$( exec -- cat -- ./.publish.rsync )"
	elif test -d ./.publish ; then
		_store="$( exec -- readlink -e -- ./.publish )"
	fi
	test -n "${_store:?}"
	flock -x -- ./target/x-run--rsync--publish-documentation-rust-debug.lock \
	rsync \
			--archive \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times \
			--compress-level 0 \
			--itemize-changes \
			--filter '- .*' \
			--filter '+ /***' \
			-- \
		./target/build/debug/doc/ \
		"${_store}/documentation/rust/debug/" \
	#
	flock -x -- ./target/x-run--rsync--publish-documentation-rust-release.lock \
	rsync \
			--archive \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times \
			--compress-level 0 \
			--itemize-changes \
			--filter '- .*' \
			--filter '+ /***' \
			-- \
		./target/build/release/doc/ \
		"${_store}/documentation/rust/release/" \
	#
!!


<< publish / documentation / libraries
	test "${#}" -eq 0
	if test -f ./.publish.rsync ; then
		_store="$( exec -- cat -- ./.publish.rsync )"
	elif test -d ./.publish ; then
		_store="$( exec -- readlink -e -- ./.publish )"
	fi
	test -n "${_store:?}"
	flock -x -- ./target/x-run--rsync--publish-documentation-libraries.lock \
	rsync \
			--archive \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times \
			--compress-level 0 \
			--itemize-changes \
			--filter '+ /libraries.md' \
			--filter '+ /libraries-md.cpio' \
			--filter '+ /libraries-md/***' \
			--filter '+ /libraries.html' \
			--filter '+ /libraries-html.cpio' \
			--filter '+ /libraries-html/***' \
			--filter '+ /libraries.json' \
			--filter '+ /libraries-index.md' \
			--filter '+ /r7rs-index.md' \
			--filter 'P /rust/***' \
			--filter '- /***' \
			-- \
		./target/documentation/ \
		"${_store}/documentation/" \
	#
!!


<< publish / all
	"${X_RUN[@]}" ':: publish / binaries'
	"${X_RUN[@]}" ':: publish / documentation / rust'
	"${X_RUN[@]}" ':: publish / documentation / libraries'
!!


EOS-31f6e6b1




find ./ -xdev -type f \
		\( -path './sources/*' -o -path './tests/*' -o -path './examples/*' \) \
		\( -name '*.rs' -o -name '*.in' -o -name '*.ss' -o -name '*.sst' \) \
		-printf ':: files / edit / %P :: exec -- sce %p\n' \
		-printf ':: files / view / %P :: exec -- less -- %p\n' \
| sort




for _test in scheme builtins-lists low-level-parser low-level-sizes low-level-assertions low-level-rust ; do
test -f "./tests/${_test}.rs"
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' <<'EOS'
:: compile / test / @{TEST} / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / test / @{TEST} / debug' "${@}"
:: compile / test / @{TEST} / debug :: "${X_RUN[@]}" ':: compile / lib / debug' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --test '@{TEST}' --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}"
:: compile / test / @{TEST} / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: compile / test / @{TEST} / release' "${@}"
:: compile / test / @{TEST} / release :: "${X_RUN[@]}" ':: compile / lib / release' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo build --quiet --test '@{TEST}' --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}"
:: execute / test / @{TEST} / tests / all / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / @{TEST} / tests / all / debug' "${@}"
:: execute / test / @{TEST} / tests / all / debug :: "${X_RUN[@]}" ':: compile / test / @{TEST} / debug' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --test '@{TEST}' --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 -- --nocapture --test-threads 1 --test 'test__' "${@}"
:: execute / test / @{TEST} / tests / all / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / @{TEST} / tests / all / release' "${@}"
:: execute / test / @{TEST} / tests / all / release :: "${X_RUN[@]}" ':: compile / test / @{TEST} / release' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --test '@{TEST}' --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --jobs 1 -- --nocapture --test-threads 1 --test 'test__' "${@}"
:: execute / test / @{TEST} / benchmarks / all / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / @{TEST} / benchmarks / all / debug' "${@}"
:: execute / test / @{TEST} / benchmarks / all / debug :: "${X_RUN[@]}" ':: compile / test / @{TEST} / debug' ; exec -- taskset -c 2 env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --test '@{TEST}' --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 -- --nocapture --test-threads 1 --bench 'benchmark__' "${@}"
:: execute / test / @{TEST} / benchmarks / all / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / @{TEST} / benchmarks / all / release' "${@}"
:: execute / test / @{TEST} / benchmarks / all / release :: "${X_RUN[@]}" ':: compile / test / @{TEST} / release' ; exec -- taskset -c 2 env PATH="${RUST_PATH:-${PATH}}" VONUVOLI_SCHEME_BENCHMARKS_OUTPUT='./tests/_outputs/@{TEST}--{IDENTIFIER}.out' cargo test --quiet --test '@{TEST}' --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --jobs 1 -- --nocapture --test-threads 1 --bench 'benchmark__' "${@}"
:: execute / test / @{TEST} / coverage / all / kcov / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / @{TEST} / coverage / all / kcov'
:: execute / test / @{TEST} / coverage / all / kcov :: export -- CARGO_TARGET_DIR="${CARGO_TARGET_DIR:-./target/kcov}" && "${X_RUN[@]}" ':: compile / test / @{TEST} / debug' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo kcov --no-clean-rebuild --test '@{TEST}' --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 --output ./target/kcov/output -- "${@}"
EOS
done


find ./tests/scheme -xdev -type f -name '*.sst' -printf '%f\n' \
| sed -r -e 's/\.sst$//' -e 's/-/_/g' \
| sort -u \
| while read _test ; do
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' <<'EOS'
:: execute / test / scheme / tests / @{TEST} / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / scheme / tests / @{TEST} / debug' "${@}"
:: execute / test / scheme / tests / @{TEST} / debug :: "${X_RUN[@]}" ':: compile / test / scheme / debug' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --test scheme --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 -- --nocapture --test-threads 1 --test 'test__@{TEST}' --exact "${@}"
:: execute / test / scheme / tests / @{TEST} / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / test / scheme / tests / @{TEST} / release' "${@}"
:: execute / test / scheme / tests / @{TEST} / release :: "${X_RUN[@]}" ':: compile / test / scheme / release' ; exec -- nice -n 19 -- env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --test scheme --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --jobs 1 -- --nocapture --test-threads 1 --test 'test__@{TEST}' --exact "${@}"
:: execute / test / scheme / benchmarks / @{TEST} / debug :: "${X_RUN[@]}" ':: compile / test / scheme / debug' ; exec -- taskset -c 2 env PATH="${RUST_PATH:-${PATH}}" cargo test --quiet --test scheme --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_tests}" --jobs 1 -- --nocapture --test-threads 1 --bench 'benchmark__@{TEST}' --exact "${@}"
:: execute / test / scheme / benchmarks / @{TEST} / release :: "${X_RUN[@]}" ':: compile / test / scheme / release' ; exec -- taskset -c 2 env PATH="${RUST_PATH:-${PATH}}" VONUVOLI_SCHEME_BENCHMARKS_OUTPUT='./tests/_outputs/scheme--{IDENTIFIER}.out' cargo test --quiet --test scheme --release --no-default-features --features "${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" --jobs 1 -- --nocapture --test-threads 1 --bench 'benchmark__@{TEST}' --exact "${@}"
EOS
done


find ./tests/scheme -xdev -type f -name '*.sst' -printf '%f\n' \
| sed -r -e 's/\.sst$//' \
| sort -u \
| while read _test ; do
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' -e 's#\{IDENTIFIER\}'#"${_test//-/_}"'#g' <<'EOS'
:: execute / bin / tester / @{TEST} / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / tester / @{TEST} / debug'
:: execute / bin / tester / @{TEST} / debug :: exec -- nice -n 19 -- "${X_RUN[@]}" ':: execute / bin / tester / debug' - './tests/scheme/@{TEST}.sst' "${@}"
:: execute / bin / tester / @{TEST} / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / tester / @{TEST} / release'
:: execute / bin / tester / @{TEST} / release :: exec -- nice -n 19 -- "${X_RUN[@]}" ':: execute / bin / tester / release' - './tests/scheme/@{TEST}.sst' "${@}"
:: execute / bin / bencher / @{TEST} / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / bencher / @{TEST} / debug'
:: execute / bin / bencher / @{TEST} / debug :: exec -- taskset -c 2 "${X_RUN[@]}" ':: execute / bin / bencher / debug' - './tests/scheme/@{TEST}.sst' "${@}"
:: execute / bin / bencher / @{TEST} / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: execute / bin / bencher / @{TEST} / release'
:: execute / bin / bencher / @{TEST} / release :: exec -- taskset -c 2 env VONUVOLI_SCHEME_BENCHMARKS_OUTPUT='./tests/_outputs/scheme--benchmark__{IDENTIFIER}.out' "${X_RUN[@]}" ':: execute / bin / bencher / release' - './tests/scheme/@{TEST}.sst' "${@}"
EOS
done


printf -- '%s\n' ':: execute / bin / tester / all / debug / watch :: exec -- "${X_RUN[@]}" ":: execute / watch" "${X_RUN[@]}" ":: execute / bin / tester / all / debug" "${@}"'
printf -- '%s\n' '<< execute / bin / tester / all / debug'
printf -- 'if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then %s ; fi\n' "\"\${X_RUN[@]}\" ':: compile / bin / debug'"
find ./tests/scheme -xdev -type f -name '*.sst' -printf '%f\n' \
| sed -r -e 's/\.sst$//' \
| sort -u \
| while read _test ; do
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' -e 's#\{IDENTIFIER\}'#"${_test//-/_}"'#g' <<'EOS'
nice -n 19 -- "${VONUVOLI_SCHEME_BINARY:-./target/default/debug/vonuvoli-scheme}" tester - './tests/scheme/@{TEST}.sst' "${@}"
EOS
done
printf -- '%s\n' '!!'


printf -- '%s\n' ':: execute / bin / tester / all / release / watch :: exec -- "${X_RUN[@]}" ":: execute / watch" "${X_RUN[@]}" ":: execute / bin / tester / all / release" "${@}"'
printf -- '%s\n' '<< execute / bin / tester / all / release'
printf -- 'if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then %s ; fi\n' "\"\${X_RUN[@]}\" ':: compile / bin / release'"
find ./tests/scheme -xdev -type f -name '*.sst' -printf '%f\n' \
| sed -r -e 's/\.sst$//' \
| sort -u \
| while read _test ; do
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' -e 's#\{IDENTIFIER\}'#"${_test//-/_}"'#g' <<'EOS'
nice -n 19 -- "${VONUVOLI_SCHEME_BINARY:-./target/default/release/vonuvoli-scheme}" tester - './tests/scheme/@{TEST}.sst' "${@}"
EOS
done
printf -- '%s\n' '!!'


printf -- '%s\n' '<< execute / bin / bencher / all / debug'
printf -- 'if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then %s ; fi\n' "\"\${X_RUN[@]}\" ':: compile / bin / debug'"
find ./tests/scheme -xdev -type f -name '*.sst' -printf '%f\n' \
| sed -r -e 's/\.sst$//' \
| sort -u \
| while read _test ; do
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' -e 's#\{IDENTIFIER\}'#"${_test//-/_}"'#g' <<'EOS'
if test './tests/scheme/@{TEST}.sst' -nt './tests/_outputs/scheme--benchmark__{IDENTIFIER}.out' ; then taskset -c 2 env VONUVOLI_SCHEME_BENCHMARKS_OUTPUT='./tests/_outputs/scheme--benchmark__{IDENTIFIER}.out' "${VONUVOLI_SCHEME_BINARY:-./target/default/debug/vonuvoli-scheme}" bencher - './tests/scheme/@{TEST}.sst' "${@}" ; fi
EOS
done
printf -- '%s\n' '!!'


printf -- '%s\n' '<< execute / bin / bencher / all / release'
printf -- 'if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then %s ; fi\n' "\"\${X_RUN[@]}\" ':: compile / bin / release'"
find ./tests/scheme -xdev -type f -name '*.sst' -printf '%f\n' \
| sed -r -e 's/\.sst$//' \
| sort -u \
| while read _test ; do
sed -r -e 's#@\{TEST\}#'"${_test}"'#g' -e 's#\{IDENTIFIER\}'#"${_test//-/_}"'#g' <<'EOS'
if test './tests/scheme/@{TEST}.sst' -nt './tests/_outputs/scheme--benchmark__{IDENTIFIER}.out' ; then taskset -c 2 env VONUVOLI_SCHEME_BENCHMARKS_OUTPUT='./tests/_outputs/scheme--benchmark__{IDENTIFIER}.out' "${VONUVOLI_SCHEME_BINARY:-./target/default/release/vonuvoli-scheme}" bencher - './tests/scheme/@{TEST}.sst' "${@}" ; fi
EOS
done
printf -- '%s\n' '!!'


find ./examples -xdev -type f -name 'benchmark--*.ss' -printf '%f\n' \
| sed -r -e 's/^benchmark--//' -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / bin / compiler / benchmarks / @{SCRIPT} / debug :: "${X_RUN[@]}" ':: execute / bin / compiler / debug' - './examples/benchmark--@{SCRIPT}.ss' "${@}" < /dev/null >| './examples/_outputs/benchmark--@{SCRIPT}--vonuvoli-compile.out' ; exec -- less -- './examples/_outputs/benchmark--@{SCRIPT}--vonuvoli-compile.out'
:: execute / bin / compiler / benchmarks / @{SCRIPT} / release :: "${X_RUN[@]}" ':: execute / bin / compiler / release' - ./examples/benchmark--@{SCRIPT}.ss' "${@}" < /dev/null >| './examples/_outputs/benchmark--@{SCRIPT}--vonuvoli-compile.out' ; exec -- less -- './examples/_outputs/benchmark--@{SCRIPT}--vonuvoli-compile.out'
:: execute / benchmark / vonuvoli / benchmarks / @{SCRIPT} / debug :: taskset -c 2 "${X_RUN[@]}" ':: execute / bin / interpreter / debug' - './examples/benchmark--@{SCRIPT}.ss' "${@}" < /dev/null | tee -- './examples/_outputs/benchmark--@{SCRIPT}--vonuvoli-debug.out'
:: execute / benchmark / vonuvoli / benchmarks / @{SCRIPT} / release :: taskset -c 2 "${X_RUN[@]}" ':: execute / bin / interpreter / release' - './examples/benchmark--@{SCRIPT}.ss' "${@}" < /dev/null | tee -- './examples/_outputs/benchmark--@{SCRIPT}--vonuvoli-release.out'
:: execute / benchmark / chibi / benchmarks / @{SCRIPT} :: taskset -c 2 "${X_RUN[@]}" ':: execute / chibi' -- './examples/benchmark--@{SCRIPT}.ss' "${@}" < /dev/null | tee -- './examples/_outputs/benchmark--@{SCRIPT}--chibi.out'
:: execute / benchmark / gauche / benchmarks / @{SCRIPT} :: taskset -c 2 "${X_RUN[@]}" ':: execute / gauche' -- './examples/benchmark--@{SCRIPT}.ss' "${@}" < /dev/null | tee -- './examples/_outputs/benchmark--@{SCRIPT}--gauche.out'
EOS
done


find ./examples -xdev -type f -name 'benchmark--*.py' -printf '%f\n' \
| sed -r -e 's/^benchmark--//' -e 's/\.py$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / benchmark / python / benchmarks / @{SCRIPT} :: taskset -c 2 "${X_RUN[@]}" ':: execute / python' -- './examples/benchmark--@{SCRIPT}.py' "${@}" < /dev/null | tee -- './examples/_outputs/benchmark--@{SCRIPT}--python.out'
EOS
done


find ./examples -xdev -type f \( -name 'benchmark--*.ss' -o -name 'benchmark--*.py' \) -printf '%f\n' \
| sed -r -e 's/^benchmark--//' -e 's/\.ss$//' -e 's/\.py$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
<< execute / benchmark / compare / benchmarks / @{SCRIPT}
	printf -- '\n--------------------------------------------------------------------------------\n' >&2
	printf -- '\n== %s / vonuvoli / release ==\n' '@{SCRIPT}' >&2
	"${X_RUN[@]}" ':: execute / benchmark / vonuvoli / benchmarks / @{SCRIPT} / release'
	printf -- '\n== %s / chibi ==\n' '@{SCRIPT}' >&2
	"${X_RUN[@]}" ':: execute / benchmark / chibi / benchmarks / @{SCRIPT}'
	printf -- '\n== %s / gauche ==\n' '@{SCRIPT}' >&2
	"${X_RUN[@]}" ':: execute / benchmark / gauche / benchmarks / @{SCRIPT}'
	if test -e './examples/benchmark--@{SCRIPT}.py' ; then
		printf -- '\n== %s / python ==\n' '@{SCRIPT}' >&2
		"${X_RUN[@]}" ':: execute / benchmark / python / benchmarks / @{SCRIPT}'
	fi
	printf -- '\n--------------------------------------------------------------------------------\n' >&2
!!
EOS
done


printf -- '%s\n' '<< execute / benchmark / compare / benchmarks / all'
find ./examples -xdev -type f -name 'benchmark--*.ss' -printf '%f\n' \
| sed -r -e 's/^benchmark--//' -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
printf -- '%s\n' "\"\${X_RUN[@]}\" ':: execute / benchmark / compare / benchmarks / ${_script}'"
done
printf -- '%s\n' '!!'


printf -- '%s\n' '<< execute / benchmark / vonuvoli / all / debug'
find ./examples -xdev -type f -name 'benchmark--*.ss' -printf '%f\n' \
| sed -r -e 's/^benchmark--//' -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
printf -- '%s\n' "\"\${X_RUN[@]}\" ':: execute / benchmark / vonuvoli / ${_script} / debug'"
done
printf -- '%s\n' '!!'


printf -- '%s\n' '<< execute / benchmark / vonuvoli / all / release'
find ./examples -xdev -type f -name 'benchmark--*.ss' -printf '%f\n' \
| sed -r -e 's/^benchmark--//' -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
printf -- '%s\n' "\"\${X_RUN[@]}\" ':: execute / benchmark / vonuvoli / ${_script} / release'"
done
printf -- '%s\n' '!!'


find ./examples -xdev -type f -name 'optimizer--*.ss' -printf '%f\n' \
| sed -r -e 's/^optimizer--//' -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / bin / compiler / optimizations / @{SCRIPT} / debug :: nice -n 19 -- "${X_RUN[@]}" ':: execute / bin / compiler / debug' - './examples/optimizer--@{SCRIPT}.ss' "${@}" >| './examples/_outputs/optimizer--@{SCRIPT}--vonuvoli-compile.out' ; exec -- less -- './examples/_outputs/optimizer--@{SCRIPT}--vonuvoli-compile.out'
:: execute / bin / compiler / optimizations / @{SCRIPT} / release :: nice -n 19 -- "${X_RUN[@]}" ':: execute / bin / compiler / release' - './examples/optimizer--@{SCRIPT}.ss' "${@}" >| './examples/_outputs/optimizer--@{SCRIPT}--vonuvoli-compile.out' ; exec -- less -- './examples/_outputs/optimizer--@{SCRIPT}--vonuvoli-compile.out'
EOS
done


printf -- '%s\n' '<< execute / bin / compiler / all / debug'
printf -- 'if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then %s ; fi\n' "\"\${X_RUN[@]}\" ':: compile / bin / debug'"
find ./examples -xdev -type f \( -name 'optimizer--*.ss' -o -name 'benchmark--*.ss' -o -name 'examples--*.ss' \) -not \( -name '*--chibi.ss' -o -name '*--gauche.ss' \) -printf '%f\n' \
| sed -r -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
nice -n 19 -- "${VONUVOLI_SCHEME_BINARY:-./target/default/debug/vonuvoli-scheme}" compiler - './examples/@{SCRIPT}.ss' "${@}" >| './examples/_outputs/@{SCRIPT}--vonuvoli-compile.out'
EOS
done
printf -- '%s\n' '!!'


printf -- '%s\n' '<< execute / bin / compiler / all / release'
printf -- 'if test -z "${VONUVOLI_SCHEME_BINARY:-}" ; then %s ; fi\n' "\"\${X_RUN[@]}\" ':: compile / bin / release'"
find ./examples -xdev -type f \( -name 'optimizer--*.ss' -o -name 'benchmark--*.ss' -o -name 'examples--*.ss' \) -not \( -name '*--chibi.ss' -o -name '*--gauche.ss' \) -printf '%f\n' \
| sed -r -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
nice -n 19 -- "${VONUVOLI_SCHEME_BINARY:-./target/default/release/vonuvoli-scheme}" compiler - './examples/@{SCRIPT}.ss' "${@}" >| './examples/_outputs/@{SCRIPT}--vonuvoli-compile.out'
EOS
done
printf -- '%s\n' '!!'




find ./examples -xdev -type f -name 'examples--*.ss' -not \( -name '*--chibi.ss' -o -name '*--gauche.ss' \) -printf '%f\n' \
| sed -r -e 's/^examples--//' -e 's/\.ss$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / bin / interpreter / examples / @{SCRIPT} / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / debug / watch' - './examples/examples--@{SCRIPT}.ss' "${@}"
:: execute / bin / interpreter / examples / @{SCRIPT} / debug :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / debug' - './examples/examples--@{SCRIPT}.ss' "${@}"
:: execute / bin / interpreter / examples / @{SCRIPT} / release / watch :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / release / watch' - './examples/examples--@{SCRIPT}.ss' "${@}"
:: execute / bin / interpreter / examples / @{SCRIPT} / release :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / release' - './examples/examples--@{SCRIPT}.ss' "${@}"
:: execute / bin / interpreter / examples / @{SCRIPT} / debug / time :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / debug / time' - './examples/examples--@{SCRIPT}.ss' "${@}"
:: execute / bin / interpreter / examples / @{SCRIPT} / release / time :: exec -- "${X_RUN[@]}" ':: execute / bin / interpreter / release / time' - './examples/examples--@{SCRIPT}.ss' "${@}"
:: execute / bin / compiler / examples / @{SCRIPT} / debug :: nice -n 19 -- "${X_RUN[@]}" ':: execute / bin / compiler / debug' - './examples/examples--@{SCRIPT}.ss' "${@}" >| './examples/_outputs/examples--@{SCRIPT}--vonuvoli-compile.out' ; exec -- less -- './examples/_outputs/examples--@{SCRIPT}--vonuvoli-compile.out'
:: execute / bin / compiler / examples / @{SCRIPT} / release :: nice -n 19 -- "${X_RUN[@]}" ':: execute / bin / compiler / release' - './examples/examples--@{SCRIPT}.ss' "${@}" >| './examples/_outputs/examples--@{SCRIPT}--vonuvoli-compile.out' ; exec -- less -- './examples/_outputs/examples--@{SCRIPT}--vonuvoli-compile.out'
EOS
done




find ./examples -xdev -type f -name 'examples--*.ss' -name '*--chibi.ss' -printf '%f\n' \
| sed -r -e 's/^examples--//' -e 's/\.ss$//' -e 's/--chibi$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / chibi / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / chibi' -- './examples/examples--@{SCRIPT}--chibi.ss' "${@}"
:: execute / chibi / time / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / chibi / time' -- './examples/examples--@{SCRIPT}--chibi.ss' "${@}"
EOS
done

find ./examples -xdev -type f -name 'examples--*.ss' -name '*--r7rs.ss' -printf '%f\n' \
| sed -r -e 's/^examples--//' -e 's/\.ss$//' -e 's/--r7rs$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / chibi / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / chibi' -- './examples/examples--@{SCRIPT}--r7rs.ss' "${@}"
:: execute / chibi / time / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / chibi / time' -- './examples/examples--@{SCRIPT}--r7rs.ss' "${@}"
EOS
done


find ./examples -xdev -type f -name 'examples--*.ss' -name '*--gauche.ss' -printf '%f\n' \
| sed -r -e 's/^examples--//' -e 's/\.ss$//' -e 's/--gauche$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / gauche / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / gauche' -- './examples/examples--@{SCRIPT}--gauche.ss' "${@}"
:: execute / gauche / time / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / gauche / time' -- './examples/examples--@{SCRIPT}--gauche.ss' "${@}"
EOS
done

find ./examples -xdev -type f -name 'examples--*.ss' -name '*--r7rs.ss' -printf '%f\n' \
| sed -r -e 's/^examples--//' -e 's/\.ss$//' -e 's/--r7rs$//' \
| sort -u \
| while read _script ; do
sed -r -e 's#@\{SCRIPT\}#'"${_script}"'#g' <<'EOS'
:: execute / gauche / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / gauche' -- './examples/examples--@{SCRIPT}--r7rs.ss' "${@}"
:: execute / gauche / time / examples / @{SCRIPT} :: exec -- "${X_RUN[@]}" ':: execute / gauche / time' -- './examples/examples--@{SCRIPT}--r7rs.ss' "${@}"
EOS
done








cat <<'EOS-31f6e6b1'


:: builder / workspace / primary :: export -- VONUVOLI_BUILDER_WORKSPACE=1
:: builder / workspace / secondary :: export -- VONUVOLI_BUILDER_WORKSPACE=2
:: builder / parallel / 4 :: export -- VONUVOLI_BUILDER_PARALLEL=4
:: builder / parallel / 8 :: export -- VONUVOLI_BUILDER_PARALLEL=8
:: builder / parallel / 16 :: export -- VONUVOLI_BUILDER_PARALLEL=16
:: builder / host / local :: export -- VONUVOLI_BUILDER_HOST=vonuvoli-scheme-builder--local X_RUN_TARGETS=builder
:: builder / host / remote :: export -- VONUVOLI_BUILDER_HOST=vonuvoli-scheme-builder--remote X_RUN_TARGETS=builder


:: builder / console / htop :: exec -- ssh -t -- "${VONUVOLI_BUILDER_HOST:?}" 'exec htop'
:: builder / console / mc :: exec -- ssh -t -- "${VONUVOLI_BUILDER_HOST:?}" 'exec mc'
:: builder / console / shell :: exec -- ssh -t -- "${VONUVOLI_BUILDER_HOST:?}" 'exec bash'
:: builder / console / kill / rustc :: exec -- ssh -t -- "${VONUVOLI_BUILDER_HOST:?}" 'exec killall -- rustc'


<< builder / synchronize / sources / push
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter 'H /.git' \
			--filter 'P /.git' \
			--filter 'H /.rust' \
			--filter 'P /.rust' \
			--filter 'H /.python' \
			--filter 'P /.python' \
			--filter 'H /target' \
			--filter 'P /target' \
			--filter 'H /examples/_outputs' \
			--filter 'P /examples/_outputs' \
			--filter 'H /tests/_outputs' \
			--filter 'P /tests/_outputs' \
			--filter '+ /.cargo/' \
			--filter '+ /.x-run.execute' \
			--filter 'P *.log*' \
			--filter 'H *.log*' \
			--filter 'P *.tmp*' \
			--filter 'H *.tmp*' \
			--filter 'P *.lock*' \
			--filter 'H *.lock*' \
			--filter '- .*' \
			-- \
		./ \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/ \
	#
!!


<< builder / synchronize / sources / push / clean
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter 'H /.git' \
			--filter 'H /.rust' \
			--filter 'H /.python' \
			--filter 'H /target' \
			--filter 'H /examples/_outputs' \
			--filter 'H /tests/_outputs' \
			--filter '+ /.cargo/' \
			--filter '+ /.x-run.execute' \
			--filter '- *.log' \
			--filter '- *.tmp*' \
			--filter '- .*' \
			-- \
		./ \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/ \
	#
!!


<< builder / synchronize / outputs / push
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter '+ /examples/' \
			--filter '+ /examples/_outputs/***' \
			--filter '+ /tests/' \
			--filter '+ /tests/_outputs/***' \
			--filter 'P /***' \
			--filter 'H /***' \
			-- \
		./ \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/ \
	#
!!


<< builder / synchronize / outputs / pull
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter '+ /examples/' \
			--filter '+ /examples/_outputs/***' \
			--filter '+ /tests/' \
			--filter '+ /tests/_outputs/***' \
			--filter 'P /***' \
			--filter 'H /***' \
			-- \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/ \
		./ \
	#
!!


<< builder / synchronize / binaries / pull
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter '+ /debug/' \
			--filter '+ /debug/debug/' \
			--filter '+ /debug/debug/vonuvoli-scheme' \
			--filter '+ /release/' \
			--filter '+ /release/release/' \
			--filter '+ /release/release/vonuvoli-scheme' \
			--filter 'P /***' \
			--filter 'H /***' \
			-- \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/target/build/ \
		./target/build/ \
	#
!!


<< builder / synchronize / documentation / rust / pull
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter '+ /debug/' \
			--filter '+ /debug/doc/***' \
			--filter '+ /release/' \
			--filter '+ /release/doc/***' \
			--filter 'P /***' \
			--filter 'H /***' \
			-- \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/target/build/ \
		./target/build/ \
	#
!!


<< builder / synchronize / documentation / libraries / pull
	test "${#}" -eq 0
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter '+ /libraries.md' \
			--filter '+ /libraries-md.cpio' \
			--filter '+ /libraries-md/***' \
			--filter '+ /libraries.html' \
			--filter '+ /libraries-html.cpio' \
			--filter '+ /libraries-html/***' \
			--filter '+ /libraries.json' \
			--filter '+ /libraries-index.md' \
			--filter '+ /r7rs-index.md' \
			--filter 'P /***' \
			--filter 'H /***' \
			-- \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/target/documentation/ \
		./target/documentation/ \
	#
!!


<< builder / synchronize / kcov / pull
	test "${#}" -eq 0
	if test ! -e ./target/kcov/ ; then
		mkdir -- ./target/kcov/
	fi
	exec -- \
	flock -x -- ./target/x-run--rsync--workspace.lock \
	rsync -n \
			--archive \
			--checksum \
			--delete-after --delete-excluded \
			--no-specials --prune-empty-dirs --links \
			--times --omit-dir-times --omit-link-times \
			--compress-level 0 \
			--info=backup,copy,del,misc,mount,name,remove,skip,symsafe --itemize-changes \
			--filter '+ /' \
			--filter '+ /***' \
			--filter 'P /***' \
			--filter 'H /***' \
			-- \
		"${VONUVOLI_BUILDER_HOST:?}":./vonuvoli-scheme-builder-"${VONUVOLI_BUILDER_WORKSPACE:-1}"/target/kcov/output/ \
		./target/kcov/output/ \
	#
!!




:: builder / build / all / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / all / debug'
<< builder / build / all / debug
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / bin / debug'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / debug'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
	export -- VONUVOLI_SCHEME_BINARY=./target/build/debug/debug/vonuvoli-scheme
	"${X_RUN[@]}" ':: builder / compile / documentation / libraries / all'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / libraries / pull'
!!

:: builder / build / all / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / all / release'
<< builder / build / all / release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / bin / release'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / release'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
	export -- VONUVOLI_SCHEME_BINARY=./target/build/release/release/vonuvoli-scheme
	"${X_RUN[@]}" ':: builder / compile / documentation / libraries / all'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / libraries / pull'
!!

:: builder / build / all / debug and release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / all / debug and release'
<< builder / build / all / debug and release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / bin / debug'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / debug'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / bin / release'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / release'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
	export -- VONUVOLI_SCHEME_BINARY=./target/build/release/release/vonuvoli-scheme
	"${X_RUN[@]}" ':: builder / compile / documentation / libraries / all'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / libraries / pull'
!!


:: builder / build / binaries / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / binaries / debug' "${@}"
<< builder / build / binaries / debug
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / bin / debug'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
!!

:: builder / build / binaries / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / binaries / release' "${@}"
<< builder / build / binaries / release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / bin / release'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
!!

:: builder / build / binaries / debug and release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / binaries / debug and release' "${@}"
<< builder / build / bin / debug and release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / bin / debug'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / bin / release'
	"${X_RUN[@]}" ':: builder / synchronize / binaries / pull'
!!


:: builder / build / documentation / rust / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / documentation / rust / debug' "${@}"
<< builder / build / documentation / rust / debug
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / debug'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
!!

:: builder / build / documentation / rust / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / documentation / rust / release' "${@}"
<< builder / build / documentation / rust / release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / release'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
!!

:: builder / build / documentation / rust / debug and release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / documentation / rust / debug and release' "${@}"
<< builder / build / documentation / rust / debug and release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / debug'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / documentation / rust / release'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / rust / pull'
!!


:: builder / build / documentation / libraries / debug / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / documentation / libraries / debug' "${@}"
<< builder / build / documentation / libraries / debug
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_debug_for_binaries}" CARGO_TARGET_DIR=./target/build/debug
	"${X_RUN[@]}" ':: builder / compile / bin / debug'
	export -- VONUVOLI_SCHEME_BINARY=./target/build/debug/debug/vonuvoli-scheme
	"${X_RUN[@]}" ':: builder / compile / documentation / libraries / all'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / libraries / pull'
!!

:: builder / build / documentation / libraries / release / watch :: exec -- "${X_RUN[@]}" ':: execute / watch' "${X_RUN[@]}" ':: builder / build / documentation / libraries / release' "${@}"
<< builder / build / documentation / libraries / release
	test "${#}" -eq 0
	"${X_RUN[@]}" ':: builder / synchronize / sources / push'
	export -- VONUVOLI_SCHEME_FEATURES="${VONUVOLI_SCHEME_FEATURES:-vonuvoli_release}" CARGO_TARGET_DIR=./target/build/release
	"${X_RUN[@]}" ':: builder / compile / bin / release'
	export -- VONUVOLI_SCHEME_BINARY=./target/build/release/release/vonuvoli-scheme
	"${X_RUN[@]}" ':: builder / compile / documentation / libraries / all'
	"${X_RUN[@]}" ':: builder / synchronize / documentation / libraries / pull'
!!




EOS-31f6e6b1

